<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Control Flowmeter - Modbus TCP</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body class="bg-gradient-to-br from-slate-900 via-blue-900 to-slate-800 min-h-screen text-white">
    <!-- Connection Status -->
    <div id="connectionStatus" class="connection-status">
        <div class="bg-red-600 text-white px-4 py-2 rounded-lg shadow-lg flex items-center space-x-2">
            <div class="w-3 h-3 rounded-full bg-red-300 status-indicator"></div>
            <span class="text-sm font-medium">Disconnected</span>
        </div>
    </div>

    <!-- Header -->
    <header class="bg-white/10 backdrop-blur-sm border-b border-white/20 p-6">
        <div class="max-w-7xl mx-auto">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <div class="w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center">
                        <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold text-white">Dashboard Control Flowmeter</h1>
                        <p id="plcInfo" class="text-blue-200">Modbus TCP - Machine 1: 192.168.5.215:8010</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <!-- Machine Selector -->
                    <div class="bg-white/10 rounded-lg p-2">
                        <select id="machineSelector" class="bg-slate-800 border border-slate-600 rounded px-3 py-1 text-white text-sm">
                            <option value="1">Machine 1</option>
                            <option value="2">Machine 2</option>
                        </select>
                    </div>
                    <div class="text-right">
                        <div class="text-sm text-gray-300">Last Update</div>
                        <div id="lastUpdate" class="text-lg font-semibold">--:--:--</div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Dashboard -->
    <main class="max-w-7xl mx-auto p-6 space-y-6">
        <!-- Control Panel -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Target Value Control -->
            <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-white">Target Value</h3>
                    <div class="text-xs text-gray-400">Holding Register 0</div>
                </div>
                
                <div class="space-y-4">
                    <div class="value-display rounded-lg p-4 text-center">
                        <div class="text-3xl font-bold text-blue-400" id="targetValue">0</div>
                        <div class="text-sm text-gray-400 mt-1">Current Target</div>
                    </div>
                    
                    <div class="flex space-x-2">
                        <input type="number" id="newTargetValue" placeholder="Enter target value" 
                               class="flex-1 bg-slate-800 border border-slate-600 rounded-lg px-4 py-2 text-white focus:border-blue-500 focus:outline-none">
                        <button onclick="setTargetValue()" 
                                class="control-button bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium">
                            Set
                        </button>
                    </div>
                </div>
            </div>

            <!-- Display Value -->
            <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-white">Current Display</h3>
                    <div class="text-xs text-gray-400">Input Register 1003</div>
                </div>
                
                <div class="value-display rounded-lg p-4 text-center">
                    <div class="text-4xl font-bold text-green-400" id="displayValue">0</div>
                    <div class="text-sm text-gray-400 mt-1">Real-time Value</div>
                </div>
                
                <div class="mt-4 flex justify-center">
                    <div class="flex items-center space-x-2">
                        <div class="w-2 h-2 rounded-full bg-green-500 status-indicator"></div>
                        <span class="text-sm text-gray-300">Live Reading</span>
                    </div>
                </div>
            </div>

            <!-- Reset Control -->
            <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-white">Tombol Control</h3>
                    <div class="text-xs text-gray-400">Coil 0</div>
                </div>
                
                <div class="space-y-4">
                    <div class="text-center">
                        <div class="text-lg font-medium text-gray-300 mb-2">Reset Status</div>
                        <div class="inline-flex items-center space-x-2">
                            <div id="resetStatus" class="w-4 h-4 rounded-full bg-gray-500"></div>
                            <span id="resetStatusText" class="text-sm">Ready</span>
                        </div>
                    </div>
                    </div>
                        <button onclick="executeStart()" 
                                class="control-button bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium">
                            START
                        </button>    
                        <button onclick="executeStop()" 
                                class="control-button bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-medium">
                            STOP                          
                        </button>                    
                       <button onclick="executeReset()" 
                            class="control-button bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg font-medium">
                        ðŸ”„ Reset
                       </button>
                    <div>
                </div>
            </div>
        </div>

        <!-- Status Information -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- System Status -->
            <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20">
                <h3 class="text-lg font-semibold text-white mb-4">System Status</h3>
                
                <div class="space-y-3">
                    <div class="flex justify-between items-center">
                        <span class="text-gray-300">Active Machine</span>
                        <span id="activeMachine" class="px-3 py-1 rounded-full text-xs font-medium bg-blue-600 text-white">Machine 1</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-300">PLC Connection</span>
                        <span id="plcStatus" class="px-3 py-1 rounded-full text-xs font-medium bg-red-600 text-white">Offline</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-300">Modbus TCP</span>
                        <span id="modbusStatus" class="px-3 py-1 rounded-full text-xs font-medium bg-red-600 text-white">Disconnected</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-300">Update Rate</span>
                        <span class="text-blue-400 font-medium">1 sec</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-300">Total Reads</span>
                        <span id="totalReads" class="text-green-400 font-medium">0</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-300">Errors</span>
                        <span id="errorCount" class="text-red-400 font-medium">0</span>
                    </div>
                </div>
            </div>

            <!-- Activity Log -->
            <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-white">Activity Log</h3>
                    <button onclick="clearLog()" class="text-xs text-gray-400 hover:text-white">Clear</button>
                </div>
                
                <div id="activityLog" class="space-y-2 max-h-64 overflow-y-auto">
                    <div class="log-entry text-sm text-gray-400 p-2 bg-slate-800/50 rounded">
                        <span class="text-blue-400">[System]</span> Dashboard initialized
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Load JavaScript -->
    <script>
        // Configuration for Flowmeter Dashboard
        const CONFIG = {
            // Machine Configuration
            machines: {
                1: {
                    name: 'Flowmeter Machine 1',
                    ip: '192.168.5.215',
                    port: 8010,
                    unitId: 1,
                    registers: {
                        target: 0,      // Holding register for target value
                        display: 1003,  // Input register for display value
                        resetCoil: 0    // Coil for reset function
                    }
                },
                2: {
                    name: 'Flowmeter Machine 2',
                    ip: '192.168.5.215', // Different IP for machine 2
                    port: 8010,
                    unitId: 2,
                    registers: {
                        target: 0,      // Holding register for target value
                        display: 1003,  // Input register for display value
                        resetCoil: 0    // Coil for reset function
                    }
                }
            },
            
            // Current active machine (default to machine 1)
            currentMachine: 2,
            
            // Update Settings
            update: {
                interval: 1000,     // 1 second update interval
                retryDelay: 3000,   // 3 seconds retry delay on error
                maxRetries: 3       // Maximum retry attempts
            },
            
            // API Endpoints
            api: {
                modbus: 'api/modbus_handler.php',
                log: 'api/log_handler.php'
            },
            
            // UI Settings
            ui: {
                maxLogEntries: 50,
                animationDuration: 300
            }
        };

        // Global state management
        const STATE = {
            isConnected: false,
            totalReads: 0,
            errorCount: 0,
            updateTimer: null,
            retryCount: 0,
            lastValues: {
                target: 0,
                display: 0
            }
        };

        // Get current machine configuration
        function getCurrentMachine() {
            return CONFIG.machines[CONFIG.currentMachine];
        }

        // Modbus TCP Communication Module
        class ModbusClient {
            constructor(config) {
                this.config = config;
                this.isConnected = false;
            }

            // Read Input Register
            async readInputRegister(register, count = 1) {
                const machine = getCurrentMachine();
                try {
                    const response = await fetch(CONFIG.api.modbus, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            action: 'read_input_register',
                            ip: machine.ip,
                            port: machine.port,
                            unitId: machine.unitId,
                            register: register,
                            count: count
                        })
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const data = await response.json();
                    
                    if (!data.success) {
                        throw new Error(data.message || 'Failed to read input register');
                    }

                    return data.value;
                } catch (error) {
                    console.error('Read input register error:', error);
                    throw error;
                }
            }

            // Read Holding Register
            async readHoldingRegister(register, count = 1) {
                const machine = getCurrentMachine();
                try {
                    const response = await fetch(CONFIG.api.modbus, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            action: 'read_holding_register',
                            ip: machine.ip,
                            port: machine.port,
                            unitId: machine.unitId,
                            register: register,
                            count: count
                        })
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const data = await response.json();
                    
                    if (!data.success) {
                        throw new Error(data.message || 'Failed to read holding register');
                    }

                    return data.value;
                } catch (error) {
                    console.error('Read holding register error:', error);
                    throw error;
                }
            }

            // Write Holding Register
            async writeHoldingRegister(register, value) {
                const machine = getCurrentMachine();
                try {
                    const response = await fetch(CONFIG.api.modbus, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            action: 'write_holding_register',
                            ip: machine.ip,
                            port: machine.port,
                            unitId: machine.unitId,
                            register: register,
                            value: value
                        })
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const data = await response.json();
                    
                    if (!data.success) {
                        throw new Error(data.message || 'Failed to write holding register');
                    }

                    return true;
                } catch (error) {
                    console.error('Write holding register error:', error);
                    throw error;
                }
            }

            // Write Coil
            async writeCoil(coil, value) {
                const machine = getCurrentMachine();
                try {
                    const response = await fetch(CONFIG.api.modbus, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            action: 'write_coil',
                            ip: machine.ip,
                            port: machine.port,
                            unitId: machine.unitId,
                            coil: coil,
                            value: value
                        })
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const data = await response.json();
                    
                    if (!data.success) {
                        throw new Error(data.message || 'Failed to write coil');
                    }

                    return true;
                } catch (error) {
                    console.error('Write coil error:', error);
                    throw error;
                }
            }
        }

        // Create global Modbus client instance
        const modbusClient = new ModbusClient(CONFIG);

        // Dashboard Main Logic
        class FlowmeterDashboard {
            constructor() {
                this.init();
            }

            // Initialize dashboard
            init() {
                this.addLog('System', 'Dashboard initialized');
                this.updateMachineInfo();
                this.startRealTimeUpdates();
                this.bindEvents();
            }

            // Update machine information display
            updateMachineInfo() {
                const machine = getCurrentMachine();
                document.getElementById('plcInfo').textContent = `Modbus TCP - ${machine.name}: ${machine.ip}:${machine.port}`;
                document.getElementById('activeMachine').textContent = machine.name;
                this.addLog('Config', `Active: ${machine.name} (${machine.ip}:${machine.port})`);
            }

            // Bind UI events
            bindEvents() {
                // Machine selector change
                document.getElementById('machineSelector').addEventListener('change', (e) => {
                    CONFIG.currentMachine = parseInt(e.target.value);
                    this.updateMachineInfo();
                    this.addLog('System', `Switched to Machine ${CONFIG.currentMachine}`);
                    // Reset connection status when switching machines
                    this.updateConnectionStatus(false);
                });

                // Handle Enter key in target input
                document.getElementById('newTargetValue').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.setTargetValue();
                    }
                });

                // Handle page visibility change
                document.addEventListener('visibilitychange', () => {
                    if (document.hidden) {
                        this.pauseUpdates();
                    } else {
                        this.resumeUpdates();
                    }
                });
            }

            // Start real-time updates
            startRealTimeUpdates() {
                if (STATE.updateTimer) {
                    clearInterval(STATE.updateTimer);
                }

                STATE.updateTimer = setInterval(() => {
                    this.readModbusData();
                }, CONFIG.update.interval);
                
                this.addLog('System', 'Real-time updates started');
            }

            // Pause updates
            pauseUpdates() {
                if (STATE.updateTimer) {
                    clearInterval(STATE.updateTimer);
                    STATE.updateTimer = null;
                    this.addLog('System', 'Updates paused');
                }
            }

            // Resume updates
            resumeUpdates() {
                if (!STATE.updateTimer) {
                    this.startRealTimeUpdates();
                    this.addLog('System', 'Updates resumed');
                }
            }

            // Read Modbus data from PLC
            async readModbusData() {
                const machine = getCurrentMachine();
                try {
                    // Read display value (Input Register 1003)
                    const displayValue = await modbusClient.readInputRegister(machine.registers.display);
                    this.updateDisplayValue(displayValue);

                    // Read target value (Holding Register 0)
                    const targetValue = await modbusClient.readHoldingRegister(machine.registers.target);
                    this.updateTargetDisplay(targetValue);

                    // Update connection status
                    this.updateConnectionStatus(true);
                    STATE.totalReads++;
                    STATE.retryCount = 0; // Reset retry count on success
                    
                    document.getElementById('totalReads').textContent = STATE.totalReads;
                    document.getElementById('lastUpdate').textContent = new Date().toLocaleTimeString();

                } catch (error) {
                    console.error('Modbus read error:', error);
                    this.handleReadError(error);
                }
            }

            // Handle read errors with retry logic
            async handleReadError(error) {
                STATE.errorCount++;
                document.getElementById('errorCount').textContent = STATE.errorCount;
                this.addLog('Error', `Read failed: ${error.message}`);
                
                if (STATE.retryCount < CONFIG.update.maxRetries) {
                    STATE.retryCount++;
                    this.addLog('System', `Retrying... (${STATE.retryCount}/${CONFIG.update.maxRetries})`);
                    
                    // Wait before retry
                    setTimeout(() => {
                        this.readModbusData();
                    }, CONFIG.update.retryDelay);
                } else {
                    this.updateConnectionStatus(false);
                    STATE.retryCount = 0; // Reset for next cycle
                }
            }

            // Set target value
            async setTargetValue() {
                const machine = getCurrentMachine();
                const newValue = parseInt(document.getElementById('newTargetValue').value);
                
                if (isNaN(newValue)) {
                    alert('Please enter a valid number');
                    return;
                }

                if (newValue < 0 || newValue > 65535) {
                    alert('Value must be between 0 and 65535');
                    return;
                }

                try {
                    // Show loading state
                    const button = event.target;
                    const originalText = button.textContent;
                    button.innerHTML = '<div class="spinner"></div>';
                    button.disabled = true;

                    await modbusClient.writeHoldingRegister(machine.registers.target, newValue);
                    
                    this.updateTargetDisplay(newValue);
                    document.getElementById('newTargetValue').value = '';
                    this.addLog('Target', `Set to ${newValue}`);

                    // Reset button
                    button.textContent = originalText;
                    button.disabled = false;

                } catch (error) {
                    console.error('Set target error:', error);
                    this.addLog('Error', `Set target failed: ${error.message}`);
                    alert('Failed to set target value: ' + error.message);
                    
                    // Reset button on error
                    const button = event.target;
                    button.textContent = 'Set';
                    button.disabled = false;
                }
            }

            // Execute reset
            async executeReset() {
                const machine = getCurrentMachine();
                if (!confirm('Are you sure you want to execute reset?')) {
                    return;
                }

                try {
                    // Set reset coil to true
                    await modbusClient.writeCoil(machine.registers.resetCoil, true);
                    
                    this.updateResetStatus(true);
                    this.addLog('Reset', 'Executed successfully');
                    
                    // Reset coil back to false after 1 second
                    setTimeout(async () => {
                        try {
                            await modbusClient.writeCoil(machine.registers.resetCoil, false);
                            this.updateResetStatus(false);
                        } catch (error) {
                            console.error('Reset coil clear error:', error);
                            this.addLog('Error', `Reset clear failed: ${error.message}`);
                        }
                    }, 1000);
                    
                } catch (error) {
                    console.error('Reset error:', error);
                    this.addLog('Error', `Reset failed: ${error.message}`);
                    alert('Failed to execute reset: ' + error.message);
                }
            }

            // Update display value
            updateDisplayValue(value) {
                if (STATE.lastValues.display !== value) {
                    const displayElement = document.getElementById('displayValue');
                    displayElement.textContent = value;
                    
                    // Add visual feedback for value changes
                    displayElement.style.transform = 'scale(1.05)';
                    setTimeout(() => {
                        displayElement.style.transform = 'scale(1)';
                    }, CONFIG.ui.animationDuration);
                    
                    STATE.lastValues.display = value;
                }
            }

            // Update target display
            updateTargetDisplay(value) {
                if (STATE.lastValues.target !== value) {
                    document.getElementById('targetValue').textContent = value;
                    STATE.lastValues.target = value;
                }
            }

            // Update connection status
            updateConnectionStatus(connected) {
                STATE.isConnected = connected;
                const statusElement = document.getElementById('connectionStatus');
                const plcStatusElement = document.getElementById('plcStatus');
                const modbusStatusElement = document.getElementById('modbusStatus');
                
                if (connected) {
                    statusElement.innerHTML = `
                        <div class="bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg flex items-center space-x-2">
                            <div class="w-3 h-3 rounded-full bg-green-300 status-indicator"></div>
                            <span class="text-sm font-medium">Connected</span>
                        </div>
                    `;
                    plcStatusElement.className = 'px-3 py-1 rounded-full text-xs font-medium bg-green-600 text-white';
                    plcStatusElement.textContent = 'Online';
                    modbusStatusElement.className = 'px-3 py-1 rounded-full text-xs font-medium bg-green-600 text-white';
                    modbusStatusElement.textContent = 'Connected';
                } else {
                    statusElement.innerHTML = `
                        <div class="bg-red-600 text-white px-4 py-2 rounded-lg shadow-lg flex items-center space-x-2">
                            <div class="w-3 h-3 rounded-full bg-red-300 status-indicator"></div>
                            <span class="text-sm font-medium">Disconnected</span>
                        </div>
                    `;
                    plcStatusElement.className = 'px-3 py-1 rounded-full text-xs font-medium bg-red-600 text-white';
                    plcStatusElement.textContent = 'Offline';
                    modbusStatusElement.className = 'px-3 py-1 rounded-full text-xs font-medium bg-red-600 text-white';
                    modbusStatusElement.textContent = 'Disconnected';
                }
            }

            // Update reset status
            updateResetStatus(active) {
                const statusElement = document.getElementById('resetStatus');
                const textElement = document.getElementById('resetStatusText');
                
                if (active) {
                    statusElement.className = 'w-4 h-4 rounded-full bg-red-500 status-indicator';
                    textElement.textContent = 'Resetting...';
                } else {
                    statusElement.className = 'w-4 h-4 rounded-full bg-gray-500';
                    textElement.textContent = 'Ready';
                }
            }

            // Add log entry
            addLog(type, message) {
                const logContainer = document.getElementById('activityLog');
                const timestamp = new Date().toLocaleTimeString();
                
                const logEntry = document.createElement('div');
                logEntry.className = 'log-entry text-sm text-gray-300 p-2 bg-slate-800/50 rounded';
                logEntry.innerHTML = `
                    <span class="text-xs text-gray-500">${timestamp}</span>
                    <span class="text-blue-400">[${type}]</span> ${message}
                `;
                
                logContainer.insertBefore(logEntry, logContainer.firstChild);
                
                // Keep only last entries
                while (logContainer.children.length > CONFIG.ui.maxLogEntries) {
                    logContainer.removeChild(logContainer.lastChild);
                }
            }

            // Clear log
            clearLog() {
                document.getElementById('activityLog').innerHTML = '';
                this.addLog('System', 'Log cleared');
            }

            // Cleanup
            destroy() {
                if (STATE.updateTimer) {
                    clearInterval(STATE.updateTimer);
                }
            }
        }

        // Global functions for HTML onclick events
        function setTargetValue() {
            dashboard.setTargetValue();
        }

        function executeReset() {
            dashboard.executeReset();
        }

        function clearLog() {
            dashboard.clearLog();
        }

        // Initialize dashboard when DOM is loaded
        let dashboard;
        document.addEventListener('DOMContentLoaded', function() {
            dashboard = new FlowmeterDashboard();
        });

        // Cleanup on page unload
        window.addEventListener('beforeunload', function() {
            if (dashboard) {
                dashboard.destroy();
            }
        });
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        body { 
            font-family: 'Inter', sans-serif; 
        }

        .status-indicator {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .value-display {
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            border: 2px solid #3b82f6;
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
        }

        .control-button {
            transition: all 0.3s ease;
            transform: translateY(0);
        }

        .control-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        .control-button:active {
            transform: translateY(0);
        }

        .connection-status {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .log-entry {
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Loading spinner */
        .spinner {
            border: 2px solid #f3f3f3;
            border-top: 2px solid #3498db;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .value-display {
                padding: 1rem;
            }
            
            .text-4xl {
                font-size: 2rem;
            }
            
            .text-3xl {
                font-size: 1.5rem;
            }
        }
    </style>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9760c28730c9fdc3',t:'MTc1NjM1MjEzOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
